<!DOCTYPE html>
<html lang="ru">
{% include 'head.html' %}
<body class="bg-gray-100 min-h-screen page-questions">
    <header class="fixed top-0 left-0 right-0 bg-white shadow-md p-4 z-10">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold text-gray-800">–°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤</h1>
            <div class="flex items-center space-x-4">
                <button id="add-theme-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–º—É</button>
                <a href="{{ url_for('index_page') }}" class="text-blue-600 hover:underline mr-4">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="{{ url_for('add_question') }}" class="text-blue-600 hover:underline">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</a>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto pt-24 pb-8 px-4">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã</h1>

        <div id="main-interview-container">
            {% for theme in themes %}
                {% set is_expanded = (expanded_theme and expanded_theme == theme.id|string) %}
                <div class="theme-container {% if not is_expanded %}collapsed{% endif %} bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-8" data-theme-id="{{ theme.id }}">
                    <div class="theme-header flex justify-between items-center mb-4 cursor-grab active:cursor-grabbing">
                        <div class="flex items-center">
                             <span class="toggle-icon text-gray-500 mr-2 transform transition-transform duration-200">‚ñº</span>
                             <h2 class="theme-title-editable text-2xl font-bold text-gray-700" contenteditable="false">{{ theme.name }}</h2>
                        </div>
                         <div class="theme-controls">
                            <button class="delete-theme-btn text-red-500 hover:text-red-700" title="–£–¥–∞–ª–∏—Ç—å —Ç–µ–º—É">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="theme-content {% if not is_expanded %}hidden{% endif %} questions-list min-h-[50px] space-y-6">
                        {% for q in questions_by_theme[theme.id] %}
                            {% include 'question_editable_block.html' %}
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}

            {% set unthemed_is_expanded = (expanded_theme == 'unthemed') %}
            <div class="theme-container-unthemed bg-gray-50 border-l-4 border-gray-400 rounded-lg p-4" data-theme-id="null">
                <h2 class="text-2xl font-bold text-gray-500 mb-4">–ë–µ–∑ —Ç–µ–º—ã</h2>
                <div id="unthemed-questions-container" class="questions-list min-h-[50px] space-y-6">
                    {% for q in unthemed_questions %}
                        {% include 'question_editable_block.html' %}
                    {% else %}
                        {% if not themes and not unthemed_questions %}
                            <p class="text-gray-600">–í–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. <a href="{{ url_for('add_question') }}" class="text-blue-600 hover:underline">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å</a>!</p>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </main>

    <div id="delete-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
            <p class="text-gray-700 mb-6">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å?</p>
            <div class="flex justify-end space-x-4">
                <button id="cancel-delete" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirm-delete" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>